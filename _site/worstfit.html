<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worst Fit</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <!--<link rel="stylesheet" href="style.css">-->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap');

        body {
            margin: auto;
            font-family: 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        .nav_bar {
            margin: auto;
            background-color: #6A889C;
            height: 3.5rem;
            position: fixed;
            width: 100%;
        }

        .nav_bar ul {
            list-style: none;
            display: flex;
            align-items: center;
            padding-top: 7px;
            margin-top: 0.5rem;
        }

        .nav_bar ul li {
            display: inline-block;
            margin: 0 auto;
        }

        .nav_bar ul li a {
            text-decoration: none;
            color: white;
        }

        .nav_bar ul li a:hover {
            color: black;
            font-weight: 600;
        }


        .content {
            padding-top: 3.5rem;
            margin: 0rem 1rem;
        }

        .code,
        .imple {
            padding-top: 5rem;
            margin-left: 1rem;

        }

        #gap2 {
            padding: 0rem 1.5rem 0rem 1.5rem;
        }

        #gap3 {
            padding-right: 4rem;
        }

        .buttons {
            color: white;
        }

        #container1,
        #container2,
        #container3 {
            font-size: 0.9rem;
            font-weight: 600;
        }

        #container3>h6 {
            font-weight: 600;
        }

        h6 {
            font-weight: 600;
        }

        .name {
            font-size: 20px;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <nav class="nav_bar">
        <ul>
            <li><a button type="button" class="buttons" id="gap1" onclick="content()">Description</a></li>
            <li><a button type="button" class="buttons" id="gap2" onclick="imple()">Implementation</a></li>
            <li><a button type="button" class="buttons" id="gap3" onclick="code()">Code</a></li>
        </ul>
    </nav>
    <div id="content" class="content">
        
        <p class="name"><b>WORST FIT</b></p>
        <div id="container1">
            <p>Worst Fit allocates a process to the memory block which is largest sufficient among the freely available blocks available in the main memory. If a large process comes at a later stage, then memory will not have space to accommodate it.<br> Since this process chooses the largest memory block, therefore there will be large internal fragmentation. Now, this internal fragmentation will be quite big so that other small processes can also be placed in that leftover block. <br> It is a slow process because it traverses all the blocks in the memory and then selects the largest block among all the memory blocks, which is a time-consuming process.
</p>
        </div>

        <!--p>class="name"><b>ALGORITHM</b></p>
        <div id="container2">
            <p>1. Input memory blocks with size and processes with sizes.<br><br>
2. Initialize all memory blocks as free.<br><br>
3. Start by picking each process and find the maximum block size that can be assigned 
to current process i.e.,<br> 
find max(bockSize[1],blockSize[2],.....blockSize[n]) > processSize[current],<br> 
if found then assign it to the current process. <br><br>
4. If not then leave that process and keep checking
the further processes.
</p>
        </div-->

        <p class="name"><b>COMPLEXITY</b></p>
        <div id="container2">
            <p>
The time complexity of Worst Fit algorithm is O(n),<br>
where n is the number of processes.
</p>
        </div>

        <p class="name"><b>WORKING</b></p>
        <div id="container3">
            <p>Let us consider an example.<br>
<br>Memory blocks available are : {100, 500, 200, 300, 600}<br>
<br>Process sizes are : {212, 417, 112, 426}<br>
<br><b>Process P1, size: 212</b><br>
<br>
<li>Block 1, Block 3 cannot fit.</li><br>
<li>For Block 2, the memory wastage is 500-212 = 288</li><br>
<li>For Block 4, the memory wastage is 300-212 = 88</li><br>
<li>For Block 5, the memory wastage is 600-212 = 388</li><br>
<li>P1 (212) is allocated to Block 5. 388 size is left in Block 5.</li><br>
<br><b>Process P2, size: 417</b><br>
<br>
<li>Block 1, Block 3, Block 4, Block 5 cannot fit.</li><br>
<li>P2 (417) is allocated to Block 2. 83 size is left in Block 2.</li><br>
<br><b>Process P3, size: 112</b><br>
<br>
<li>Block 1, Block 2 cannot fit.</li><br>
<li>For Block 3, the memory wastage is 200-112 = 88 </li><br>
<li>For Block 4, the memory wastage is 300-112 = 188</li><br>
<li>For Block 5, the memory wastage is 388-112 = 276</li><br>
<li>P3 (112) is allocated to Block 5. 276 size is left in Block 5.</li><br>
<br><b>Process P4, size: 426</b><br>
<br>
<li>P4 (426) can't be allocated to any blocks. It remains unallocated</li>
</p>
        </div>

    </div>

    <div id="code" class="code" style="display:none;">
        <pre><h6>// Method to allocate memory to blocks as per worst fit algorithm
function worstFit(blockSize, m, processSize, n)
{
  // Stores block id of the block allocated to a process
  let allocation = new Array(n);
       
  // Initially no block is assigned to any process
  for(let i = 0; i < allocation.length; i++)
    allocation[i] = -1;
       
  // Pick each process and find suitable blocks according to its size ad assign to it
  for(let i = 0; i < n; i++)
  { 
    // Find the best fit block for current process
    let wstIdx = -1;
    for(let j = 0; j < m; j++)
    {
      if (blockSize[j] >= processSize[i])
      {
        if (wstIdx == -1)
          wstIdx = j;
        else if (blockSize[wstIdx] < blockSize[j])
          wstIdx = j;
      }
    }
       
    // If we could find a block for current process
    if (wstIdx != -1)
    {    
      // Allocate block j to p[i] process
      allocation[i] = wstIdx;
       
      // Reduce available memory in this block.
      blockSize[wstIdx] -= processSize[i];
    }
}
</h6></pre>
    </div>
    </div>
    <div id="imple" class="imple" style="display:none">
        <div class="implementation">
   
    <div class="container">
        <div class="row">
            
            <div class="col-md-4">
                <h5>Enter block sizes one by one: </h5>
                <input type="number" class="form-control" id="input1" placeholder="Enter a valid number:">
            </div>
        </div><br>
        <button class="btn btn-primary" onclick="add('input1')">Add</button><br><br>
        <h6>
            <div id="every1"></div>
        </h6>
        <div class="row">
            
            <div class="col-md-4">
                <h5>Enter process sizes one by one: </h5>
                <input type="number" class="form-control" id="input2" placeholder="Enter a valid number:">
            </div>
        </div><br>
        <button class="btn btn-primary" onclick="add('input2')">Add</button><br><br>
        <h6>
            <div id="every2"></div>
        </h6>
        <h5>Click for sorted array:</h5>
        <button class="btn btn-primary" onclick="worstFit()">Sort</button><br><br>
        <h6>
            <div id="result"></div>
        </h6>
    </div>
</div>

<script type="text/javascript">
    var input1 = document.getElementById("input1");
    var input2 = document.getElementById("input2");
    input1.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
            document.getElementById("add('input1')").click();
        }
    });
    input2.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
            document.getElementById("add('input2')").click();
        }
    });
    var i = 0;
    var j = 0;
    var blockSize = [];
    var processSize = [];
    function add(given_input) {
        var val = document.getElementById(given_input).value;
        if (given_input === 'input1') {
            blockSize[i] = parseInt(val);
            document.getElementById("every1").innerHTML = blockSize;
            i++;
        } else {
            processSize[j] = parseInt(val);
            document.getElementById("every2").innerHTML = processSize;
            j++;
        }
        document.getElementById(given_input).value = "";
    }


    function worstFit() {

        let m = blockSize.length;
        let n = processSize.length;
        var str = "";

        const allocation = [];

        for (let i = 0; i < allocation.length; i++)
            allocation[i] = -1;

        for (let i = 0; i < n; i++) {

            let wstIdx = -1;
            for (let j = 0; j < m; j++) {
                if (blockSize[j] >= processSize[i]) {
                    if (wstIdx == -1)
                        wstIdx = j;
                    else if (blockSize[wstIdx] <
                        blockSize[j])
                        wstIdx = j;
                }
            }

            if (wstIdx != -1) {

                allocation[i] = wstIdx;

                blockSize[wstIdx] -= processSize[i];
            }
        }


        str += "Process-No." + '&emsp;' + "Process-Size" + '&emsp;' + "Block-No.";
        str += "<br>";
        for (let i = 0; i < n; i++) {
            let s = "Not Allocated"
            if (allocation[i] > -1) {
                str += (i + 1) + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + processSize[i] + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + (allocation[i] + 1);
                str += "<br>";
            } else {
                str += (i + 1) + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + processSize[i] + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + '&emsp;' + "Not Allocated";
                str += "<br>";
            }
        }
        document.getElementById("result").innerHTML = str;
    };









</script>

</body>

</html>
    </div>
    <script>
         function code() {
            var y = document.getElementsByClassName("code");
            y[0].style.display = "block";
            var z = document.getElementsByClassName("content");
            z[0].style.display = "none";
            var x = document.getElementsByClassName("imple");
            x[0].style.display = "none";
        }
        function imple() {
            var p = document.getElementsByClassName("imple");
            p[0].style.display = "block";
            var q = document.getElementsByClassName("content");
            q[0].style.display = "none";
            var r = document.getElementsByClassName("code");
            r[0].style.display = "none";
        }
        function content() {
            var a = document.getElementsByClassName("content");
            a[0].style.display = "block";
            var b = document.getElementsByClassName("imple");
            b[0].style.display = "none";
            var c = document.getElementsByClassName("code");
            c[0].style.display = "none";
        }
    </script>

</body>

</html>