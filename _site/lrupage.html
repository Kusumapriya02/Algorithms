<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lru</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <!--<link rel="stylesheet" href="style.css">-->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap');

        body {
            margin: auto;
            font-family: 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        .nav_bar {
            margin: auto;
            background-color: #6A889C;
            height: 3.5rem;
            position: fixed;
            width: 100%;
        }

        .nav_bar ul {
            list-style: none;
            display: flex;
            align-items: center;
            padding-top: 7px;
            margin-top: 0.5rem;
        }

        .nav_bar ul li {
            display: inline-block;
            margin: 0 auto;
        }

        .nav_bar ul li a {
            text-decoration: none;
            color: white;
        }

        .nav_bar ul li a:hover {
            color: black;
            font-weight: 600;
        }


        .content {
            padding-top: 3.5rem;
            margin: 0rem 1rem;
        }

        .code,
        .imple {
            padding-top: 5rem;
            margin-left: 1rem;

        }

        #gap2 {
            padding: 0rem 1.5rem 0rem 1.5rem;
        }

        #gap3 {
            padding-right: 4rem;
        }

        .buttons {
            color: white;
        }

        #container1,
        #container2,
        #container3 {
            font-size: 0.9rem;
            font-weight: 600;
        }

        #container3>h6 {
            font-weight: 600;
        }

        h6 {
            font-weight: 600;
        }

        .name {
            font-size: 20px;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <nav class="nav_bar">
        <ul>
            <li><a button type="button" class="buttons" id="gap1" onclick="content()">Description</a></li>
            <li><a button type="button" class="buttons" id="gap2" onclick="imple()">Implementation</a></li>
            <li><a button type="button" class="buttons" id="gap3" onclick="code()">Code</a></li>
        </ul>
    </nav>
    <div id="content" class="content">
        
        <p class="name"><b>LRU PAGE REPLACEMENT</b></p>
        <div id="container1">
            <p>Least Recently Used (LRU) algorithm is a page replacement technique used for memory management. In this algorithm, the page that is least recently used in the current set will be replaced. That is, in the left side of the table that we created we choose the further most page to get replaced.
</p>
        </div>

        <!--p>class="name"><b>ALGORITHM</b></p>
        <div id="container2">
            <p><h5>
  Let capacity be the number of pages that memory can hold. Let set be the current set of pages in memory.<br><br>
  1.Start traversing the pages.<br>
  &emsp;i. If set holds less pages than capacity.<br>
  <ul>
    a) Insert page into the set one by one until the size of set reaches capacity or all
    page requests are processed.<br>
    b) Simultaneously maintain the recent occurred index of each page in a map called indexes.<br>
    c) Increment page fault</ul>
    &emsp;ii. Else <br>
    <ul>
      <ul>
        If <br>&emsp;current page is present in set, do nothing.
      </ul>
      &emsp;&nbsp;Else <br>
      <ul>
        &emsp;a) Find the page in the set that was least recently used. We find it using index array.
        We basically need to replace the page with minimum index.<br>
        &emsp;b) Replace the found page with current page.<br>
        &emsp;c) Increment page faults.<br>
        &emsp;d) Update index of current page.<br>
      </ul>
    </ul>
    2. Return page faults.
</h5>
</p>
        </div-->

        <p class="name"><b>COMPLEXITY</b></p>
        <div id="container2">
            <p>
The Complexity of LRU Page Replacement Algorithm is O(n*m)
<br> where'n' is number of pages and 'm' is number of frames.
</p>
        </div>

        <p class="name"><b>WORKING</b></p>
        <div id="container3">
            <p>
Consider the reference string and number of frames as pages = [ 7, 0, 1, 2,
0, 3, 0, 4, 2, 3, 0, 3, 2] and 4 respectively.<br><br>
<img src="https://i0.wp.com/technobyte.org/wp-content/uploads/2019/12/sym-1.jpg?ssl=1">
<br><br>
<li>Initially all the memory slots will be empty so [7, 0, 1, 2] will be allocated to the memory
    with 4 page-faults.</li><br>
<li>As [0] is already available in the page frames, it hits. Page fault remains the same.</li><br>
<li>Next in the string is [3]. Since [7] is the least recently used, so [3] replaces [7]. It results in
    1 page fault.</li><br>
<li>Since, [0] is already present, the page hits and page faults remains same.</li><br>
<li>Next in the string is [4]. Since [1] is the least recently used, so [4] replaces [1]. It results in
    1 page fault.</li><br>
<li>Since the rest of the string is already present in the frames, so there will be no page fault as all
    the arriving pages are already there in the memory.</li><br>
</p>
        </div>

    </div>

    <div id="code" class="code" style="display:none;">
        <pre><h6>
function pageFaults(pages,n,frame_number)
{
  n = pages.length;
  // To represent set of current pages. We use
  // an unordered_set 'left' so that we quickly check
  // if a page is present in set or not
  let left = new Set();
  // To store least recently used indexes
  // of pages.
  let indexes = new Map();
  // Start from initial page
  let page_faults = 0;
  for (let i=0; i< n; i++)
  {
    // Check if the set can hold more pages
    if (left.size < frame_number)
    {
      // Insert it into set if not present
      //already which represents page fault
      if (!left.has(pages[i]))
      {
        left.add(pages[i]);       
        // increment page fault
        page_faults++;
      }

      // Store the recently used index of
      // each page
      indexes.set(pages[i], i);
    }
                    
    // If the set is full then need to perform lru
    // i.e. remove the least recently used page
    // and insert the current page
    else
    {
      // Check if current page is not already
      // present in the set
      if (!left.has(pages[i]))
      {
        // Find the least recently used pages
        // that is present in the set
        let lru = Number.MAX_VALUE, val=Number.MIN_VALUE;
        for(let itr of left.values()) {
          let temp = itr;
          if (indexes.get(temp) < lru)
          {
            lru = indexes.get(temp);
            val = temp;
          }
        }               
        // Remove the indexes page
        left.delete(val);
        //remove lru from hashmap
        indexes.delete(val);
        // insert the current page
        left.add(pages[i]);
        // Increment page faults
        page_faults++;
      }
      // Update the current page index
      indexes.set(pages[i], i);
    }
  }                
  return page_faults;
}
</h6></pre>
    </div>
    </div>
    <div id="imple" class="imple" style="display:none">
        <div class="implementation">
    
    <div class="container">
        <div class="row">

            <div class="col-md-4">
                <h5>Enter input one by one: </h5>
                <input type="number" class="form-control" id="input" placeholder="Enter a valid number:">
            </div>
        </div><br>
        <button onclick="add()" class="btn btn-primary" id="add">Add</button><br><br>
        <h6 id="every"></h6>
        <div class="row">

            <div class="col-md-4">
                <h5>Enter number of frames: </h5>
                <input type="number" class="form-control" id="input1" placeholder="Enter a valid number:">
            </div>
        </div><br>
        <h5>Click the below button to get result :</h5>
        <button class="btn btn-primary" onclick="answer()">Submit</button><br><br>
        <h6 id="results"></h6>
    </div>
</div>


<script type="text/javascript">
    var input = document.getElementById("input");
    input.addEventListener("keypress", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("add").click();
        }
    });
    var i = 0;
    var str = "";
    var pages = [];
    function add() {
        var val = document.getElementById("input").value;
        pages[i] = parseInt(val);
        document.getElementById("input").value = "";
        i += 1;
        document.getElementById("every").innerHTML = pages;
    }

    function answer() {
        var n = pages.length;
        var capacity = parseInt(document.getElementById("input1").value);
        pageFaults(pages, n, capacity);
    }

    function pageFaults(pages, n, capacity) {
        let s = new Set();
        let indexes = new Map();
        var page_hits;
        var pfpercent;
        var phpercent;
        var fg = new Array(capacity);

        str += "The entered pages are" + '&nbsp;' + "[";
        for (var i = 0; i < n; i++) {
            str += String(pages[i]) + '&nbsp;';
        }
        str += "]" + "<br>" + "The entered number of frames is " + String(capacity) + "<br>";

        let page_faults = 0;
        for (let i = 0; i < n; i++) {
            if (s.size < capacity) {
                if (!s.has(pages[i])) {
                    s.add(pages[i]);
                    page_faults++;
                    str += "The page at which the page faults occurs is " + (i + 1) + "<br>";
                    str += "The frame is" + '&nbsp;';
                    str += "[";
                    s.forEach(element => {
                        str += '&nbsp;' + String(element) + '&nbsp;';
                    });

                    str += "]";
                    str = str + "<br>";
                }
                indexes.set(pages[i], i);
            }
            else {
                if (!s.has(pages[i])) {
                    let lru = 99999, val = -1;

                    for (let itr of s.values()) {
                        let temp = itr;
                        if (indexes.get(temp) < lru) {
                            lru = indexes.get(temp);
                            val = temp;
                        }
                    }

                    s.delete(val);
                    indexes.delete(val);
                    s.add(pages[i]);
                    page_faults++;
                    str += "The page at which the page faults occurs is " + (i + 1) + "<br>";
                    str += "The frame is" + '&nbsp;';
                    str += "[";
                    s.forEach(element => {

                        str += '&nbsp;' + String(element) + '&nbsp;';

                    });
                    str += "]";
                    str = str + "<br>";
                }
                indexes.set(pages[i], i);
            }
        }
        pfpercent = (page_faults / n) * 100;
        page_hits = n - page_faults;
        phpercent = (page_hits / n) * 100;
        str += "Total Page Faults : " + String(page_faults) + "<br>";
        str += "Total Page Hits : " + String(page_hits) + "<br>";
        str += "Page Faults Percentage : " + String(pfpercent.toFixed(5));
        str += "<br>Page Hits Percentage : " + String(phpercent.toFixed(5)) + "<br>" + "<br>";
        document.getElementById("results").innerHTML = str;
    }


</script>
    </div>
    <script>
         function code() {
            var y = document.getElementsByClassName("code");
            y[0].style.display = "block";
            var z = document.getElementsByClassName("content");
            z[0].style.display = "none";
            var x = document.getElementsByClassName("imple");
            x[0].style.display = "none";
        }
        function imple() {
            var p = document.getElementsByClassName("imple");
            p[0].style.display = "block";
            var q = document.getElementsByClassName("content");
            q[0].style.display = "none";
            var r = document.getElementsByClassName("code");
            r[0].style.display = "none";
        }
        function content() {
            var a = document.getElementsByClassName("content");
            a[0].style.display = "block";
            var b = document.getElementsByClassName("imple");
            b[0].style.display = "none";
            var c = document.getElementsByClassName("code");
            c[0].style.display = "none";
        }
    </script>

</body>

</html>